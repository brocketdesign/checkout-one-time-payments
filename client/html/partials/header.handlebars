<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

<header class="navbar navbar-expand-md navbar-dark bg-dark shadow-sm">
  <div class="container-fluid">
    <a class="navbar-brand" href="/{{language}}/">{{translations.ai_video_face_swap}}</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <a class="nav-link" href="/{{language}}/">{{translations.home.title}}</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#demo">{{translations.demo.title}}</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#benefits">{{translations.benefits.title}}</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#pricing">{{translations.dynamicPricing.title}}</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#faq">{{translations.faq.title}}</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/{{#ifCond language '==' 'en'}}{{else}}{{language}}/{{/ifCond}}history">{{translations.history_title}}</a>
        </li>
        <li class="nav-item">
          <select id="language-switch" class="form-select bg-light text-dark">
            <option value="en" {{#ifCond language '==' 'en'}}selected{{/ifCond}}>
              <span class="language-option"><i class="bi bi-globe"></i> English</span>
            </option>
            <option value="ja" {{#ifCond language '==' 'ja'}}selected{{/ifCond}}>
              <span class="language-option"><i class="bi bi-globe"></i> 日本語</span>
            </option>
          </select>
        </li>
      </ul>
    </div>
  </div>
</header>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  document.getElementById('language-switch').addEventListener('change', function() {
    const selectedLanguage = this.value;
    const currentPath = window.location.pathname;

    // Redirect to the appropriate language-specific URL
    if (selectedLanguage === 'en') {
      if (currentPath !== '/' && currentPath !== '/en/') {
        window.location.href = '/';
      }
    } else {
      window.location.href = `/${selectedLanguage}/`;
    }
  });

  // Add smooth scrolling to anchor links
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();

      document.querySelector(this.getAttribute('href')).scrollIntoView({
        behavior: 'smooth'
      });
    });
  });
</script>

<style>
  /* Style the language switcher */
  #language-switch {
    border: none;
    padding: 0.5rem;
    cursor: pointer;
    appearance: none; /* Remove default arrow */
    -webkit-appearance: none; /* Remove default arrow for safari */
  }

  #language-switch:focus {
    outline: none;
  }

  .language-option {
    display: flex;
    align-items: center;
  }

  .language-option i {
    margin-right: 0.5rem; /* Add spacing between icon and text */
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    .navbar-container {
      flex-direction: column;
      align-items: flex-start;
    }

    .nav-links {
      margin-top: 1rem;
      flex-direction: column;
      align-items: flex-start;
    }
  }
</style>
